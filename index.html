<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø¶Ø±Ø§Ø¦Ø¨ Ø§Ù„Ù…ØµØ±ÙŠØ© | ØªÙ†Ø³ÙŠÙ‚ Ø§Ø­ØªØ±Ø§ÙÙŠ</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Arabic:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #2563eb;
            --bg-body: #f8fafc;
            --card-bg: #ffffff;
            --text-main: #1e293b;
            --text-muted: #64748b;
            --success: #22c55e;
            --warning: #f59e0b;
            --danger: #ef4444;
            --border: #e2e8f0;
            --cup-empty: #f1f5f9;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Noto Sans Arabic', sans-serif; }

        body {
            background-color: var(--bg-body);
            color: var(--text-main);
            line-height: 1.6;
            padding: 20px;
        }

        .container { max-width: 950px; margin: 0 auto; }

        header { text-align: center; margin-bottom: 30px; }
        header h1 { font-size: 1.8rem; color: var(--primary); margin-bottom: 5px; }
        header p { color: var(--text-muted); font-size: 0.95rem; }

        .card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
            margin-bottom: 25px;
            border: 1px solid var(--border);
        }

        .input-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); 
            gap: 20px; 
            margin-bottom: 20px; 
        }

        .input-group { display: flex; flex-direction: column; gap: 8px; }
        
        .radio-group {
            display: flex;
            gap: 15px;
            background: #f1f5f9;
            padding: 8px;
            border-radius: 10px;
        }

        .radio-option {
            display: flex;
            align-items: center;
            gap: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            flex: 1;
            justify-content: center;
            padding: 6px;
            border-radius: 6px;
            transition: background 0.2s;
        }

        label { font-weight: 700; font-size: 0.95rem; color: var(--text-main); }
        input[type="number"] {
            padding: 12px;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-size: 1.1rem;
            outline: none;
            transition: border-color 0.2s;
        }
        input:focus { border-color: var(--primary); }

        .results-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin-top: 25px;
        }

        .stat-box {
            padding: 15px;
            background: #f8fafc;
            border-radius: 12px;
            text-align: center;
            border: 1px solid var(--border);
        }
        .stat-box h3 { font-size: 0.8rem; color: var(--text-muted); margin-bottom: 5px; }
        .stat-box div { font-size: 1.2rem; font-weight: 800; }
        .highlight { border-color: var(--primary); background: #eff6ff; }
        .highlight div { color: var(--primary); font-size: 1.5rem; }

        /* Cups Section */
        .cups-container {
            display: flex;
            gap: 10px;
            align-items: flex-end;
            justify-content: space-between;
            height: 160px;
            margin: 25px 0;
        }
        .cup-wrapper {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100%;
            justify-content: flex-end;
        }
        .cup {
            width: 100%;
            max-width: 70px;
            height: 100px;
            border: 3px solid #cbd5e1;
            border-top: none;
            border-radius: 0 0 12px 12px;
            position: relative;
            background: var(--cup-empty);
            overflow: hidden;
            display: flex;
            align-items: flex-end;
        }
        .fill {
            width: 100%;
            background: var(--primary);
            transition: height 0.6s ease-out;
        }
        .cup-label { margin-top: 8px; font-size: 0.7rem; font-weight: 700; text-align: center; color: var(--text-main); line-height: 1.2; }

        /* Stairs Section */
        .stairs-container {
            display: flex;
            flex-direction: column-reverse;
            gap: 8px;
            margin-top: 20px;
        }
        .step {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 0.5fr;
            gap: 10px;
            padding: 12px 15px;
            background: #f1f5f9;
            border-radius: 8px;
            align-items: center;
            border-right: 5px solid #cbd5e1;
            font-size: 0.85rem;
        }
        .step.active { background: #fff; box-shadow: 0 2px 8px rgba(0,0,0,0.05); border-right-color: var(--primary); }
        .step-title { font-weight: 700; }
        .step-tax { color: var(--danger); font-weight: 700; }
        .step-rate { background: #dbeafe; color: var(--primary); padding: 2px 6px; border-radius: 4px; font-weight: 700; text-align: center; }

        .egyptian-steps {
            background: #fffbeb;
            border: 1px solid #fde68a;
            border-radius: 16px;
            padding: 24px;
            margin-top: 25px;
            margin-bottom: 25px;
        }
        .egyptian-steps h3 { color: #92400e; margin-bottom: 15px; }
        .egyptian-steps li { margin-bottom: 10px; font-size: 0.95rem; color: #78350f; list-style-type: 'âœ… '; padding-right: 5px; }

        /* Explanation Box CSS */
        .explain-box{
            background:#f8fafc;
            border:1px solid var(--border);
            border-radius:14px;
            padding:16px;
        }
        .explain-box ol{
            margin: 0;
            padding-right: 18px;
        }
        .explain-box li{
            margin: 10px 0;
            color: var(--text-main);
            font-size: 0.95rem;
        }
        .badge{
            display:inline-block;
            padding:2px 8px;
            border-radius:999px;
            background:#eff6ff;
            border:1px solid #dbeafe;
            color: var(--primary);
            font-weight:800;
            font-size:0.85rem;
            margin-left:6px;
        }
        .mono{
            font-variant-numeric: tabular-nums;
            font-weight:800;
        }
        .small-note{
            color: var(--text-muted);
            font-size: 0.85rem;
            margin-top:10px;
        }

        @media (max-width: 600px) {
            .step { grid-template-columns: 1fr 1fr; text-align: center; }
            .step-rate { grid-column: span 2; }
            .cups-container { height: 120px; gap: 5px; }
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø¶Ø±Ø§Ø¦Ø¨ Ø§Ù„Ù…ØµØ±ÙŠØ© (Ø´Ù‡Ø±ÙŠØ§Ù‹)</h1>
        <p>Ø¨ØªØ­Ø³Ø¨ Ø§Ù„ÙˆØ¹Ø§Ø¡ ÙˆØªÙˆØ²Ø¹Ù‡ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø±Ø§Ø¦Ø­ Ø¹Ø´Ø§Ù† ØªØ¹Ø±Ù Ù…Ù„ÙŠÙ…Ùƒ Ø±Ø§ÙŠØ­ ÙÙŠÙ†</p>
    </header>

    <div class="card">
        <div class="input-grid">
            <!-- Salary Input -->
            <div class="input-group">
                <label>Ø§Ù„Ù…Ø±ØªØ¨ Ø§Ù„Ø´Ù‡Ø±ÙŠ (Gross)</label>
                <input type="number" id="salary" value="15000" oninput="calculate()">
            </div>

            <!-- Insurance Toggle -->
            <div class="input-group">
                <label>ÙÙŠ ØªØ£Ù…ÙŠÙ†Ø§Øª Ø¨ØªØªØ®ØµÙ…ØŸ</label>
                <div class="radio-group">
                    <label class="radio-option">
                        <input type="radio" name="insured" value="yes" checked onchange="updateUI()"> Ø£ÙŠÙˆÙ‡
                    </label>
                    <label class="radio-option">
                        <input type="radio" name="insured" value="no" onchange="updateUI()"> Ù„Ø§
                    </label>
                </div>
            </div>

            <!-- Insurance Value -->
            <div class="input-group" id="insContainer">
                <label id="insLabel">ØªØ£Ù…ÙŠÙ†Ø§Øª Ø§Ù„Ù…ÙˆØ¸Ù (Ø´Ù‡Ø±ÙŠØ§Ù‹)</label>
                <input type="number" id="insurance" value="1400" oninput="calculate()">
            </div>
        </div>

        <div class="results-summary">
            <div class="stat-box">
                <h3>Ø§Ù„ÙˆØ¹Ø§Ø¡ Ø§Ù„Ø´Ù‡Ø±ÙŠ</h3>
                <div id="resMonthlyTaxable">0</div>
            </div>
            <div class="stat-box">
                <h3>Ø§Ù„ÙˆØ¹Ø§Ø¡ Ø§Ù„Ø³Ù†ÙˆÙŠ</h3>
                <div id="resAnnualTaxable">0</div>
            </div>
            <div class="stat-box highlight">
                <h3>Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ø´Ù‡Ø±ÙŠØ©</h3>
                <div id="resMonthlyTax">0</div>
            </div>
            <div class="stat-box">
                <h3>Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ø³Ù†ÙˆÙŠØ©</h3>
                <div id="resAnnualTax">0</div>
            </div>
        </div>
    </div>

    <!-- Visualizers -->
    <div class="card">
        <h3 style="margin-bottom: 10px;">1. ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø£ÙƒÙˆØ§Ø¨ (Ù†Ø¸Ø±Ø© Ø³Ø±ÙŠØ¹Ø©)</h3>
        <div class="cups-container" id="cups"></div>

        <h3 style="margin-top: 30px; margin-bottom: 10px;">2. Ø³Ù„Ù… Ø§Ù„Ø´Ø±Ø§Ø¦Ø­ (Ø¨Ø§Ù„ØªÙØµÙŠÙ„ Ø§Ù„Ù…Ù…Ù„)</h3>
        <div class="stairs-container" id="stairs"></div>
    </div>

    <div class="egyptian-steps">
        <h3>Ø§Ù„Ø­Ø³Ø¨Ø© Ù…Ø´ÙŠØª Ø¥Ø²Ø§ÙŠØŸ (Ø¨Ø§Ù„Ø¨Ù„Ø¯ÙŠ ÙƒØ¯Ù‡)</h3>
        <ul>
            <li>Ø¨Ù†Ø§Ø®Ø¯ Ù…Ø±ØªØ¨Ùƒ Ø§Ù„Ø´Ù‡Ø±ÙŠØŒ Ù†Ø´ÙŠÙ„ Ù…Ù†Ù‡ <strong>Ø§Ù„ØªØ£Ù…ÙŠÙ†Ø§Øª</strong> ÙˆÙƒÙ…Ø§Ù† <strong>Ø¥Ø¹ÙØ§Ø¡ Ø´Ø®ØµÙŠ</strong> (1,667 Ø¬Ù†ÙŠÙ‡).</li>
            <li>Ø§Ù„Ù„ÙŠ Ø¨ÙŠÙØ¶Ù„ Ø¯Ù‡ Ø¨Ù†Ø³Ù…ÙŠÙ‡ "Ø§Ù„ÙˆØ¹Ø§Ø¡"ØŒ Ø¨Ù†Ø¶Ø±Ø¨Ù‡ ÙÙŠ 12 Ø¹Ø´Ø§Ù† Ù†Ø·Ù„Ø¹ "Ø§Ù„ÙˆØ¹Ø§Ø¡ Ø§Ù„Ø³Ù†ÙˆÙŠ" Ø§Ù„Ù„ÙŠ Ø¨ØªØªØ­Ø³Ø¨ Ø¹Ù„ÙŠÙ‡ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©.</li>
            <li>Ø§Ù„ÙˆØ¹Ø§Ø¡ Ø§Ù„Ø³Ù†ÙˆÙŠ Ø¯Ù‡ Ø¨Ù‚Ù‰ Ø¨Ù†ØµØ¨Ù‡ ÙÙŠ "Ø§Ù„Ø£ÙƒÙˆØ§Ø¨" Ø§Ù„Ù„ÙŠ ÙÙˆÙ‚ Ø¯ÙŠ Ø¨Ø§Ù„ØªØ±ØªÙŠØ¨.. Ø£ÙˆÙ„ 40 Ø£Ù„Ù Ø¬Ù†ÙŠÙ‡ "Ù…ÙŠØ© Ø¨Ø§Ø±Ø¯Ø©" Ù…ÙÙŠØ´ Ø¹Ù„ÙŠÙ‡Ù… Ø¶Ø±ÙŠØ¨Ø©.</li>
            <li>ÙƒÙ„ Ù…Ø§ Ø§Ù„Ù…Ø¨Ù„Øº ÙŠØ²ÙŠØ¯ØŒ ÙŠØ®Ø´ ÙÙŠ ÙƒØ¨Ø§ÙŠØ© Ø£ØºÙ„Ù‰ (Ù†Ø³Ø¨Ø© Ø¶Ø±ÙŠØ¨Ø© Ø£Ø¹Ù„Ù‰).</li>
            <li>ÙÙŠ Ø§Ù„Ø¢Ø®Ø± Ø¨Ù†Ø¬Ù…Ø¹ Ø§Ù„Ù„ÙŠ Ø·Ù„Ø¹ Ù…Ù† ÙƒÙ„ Ø§Ù„ÙƒØ¨Ø§ÙŠØ§Øª ÙˆÙ†Ù‚Ø³Ù…Ù‡ Ø¹Ù„Ù‰ 12 Ø¹Ø´Ø§Ù† Ù†Ø·Ù„Ø¹ Ù†ØµÙŠØ¨ Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ù„ÙŠ Ø¨ÙŠØªØ®ØµÙ… Ù…Ù†Ùƒ.</li>
        </ul>
    </div>

    <!-- Step-by-Step Explanation Card -->
    <div class="card" id="explainCard">
        <h3 style="margin-bottom: 12px;">ğŸ“Œ Ø´Ø±Ø­ Ø§Ù„Ø­Ø³Ø¨Ø© Ø®Ø·ÙˆØ© Ø¨Ø®Ø·ÙˆØ©</h3>
        <div id="explainSteps"></div>
    </div>
</div>

<script>
const PERSONAL_EXEMPTION_ANNUAL = 20000;
const EXEMPTION_MONTHLY = PERSONAL_EXEMPTION_ANNUAL / 12;

const brackets = [
    { limit: 40000, rate: 0, label: "Ù…Ø¹ÙØ§Ø©" },
    { limit: 15000, rate: 0.10, label: "Ø´Ø±ÙŠØ­Ø© 10%" },
    { limit: 15000, rate: 0.15, label: "Ø´Ø±ÙŠØ­Ø© 15%" },
    { limit: 130000, rate: 0.20, label: "Ø´Ø±ÙŠØ­Ø© 20%" },
    { limit: 200000, rate: 0.225, label: "Ø´Ø±ÙŠØ­Ø© 22.5%" },
    { limit: 200000, rate: 0.25, label: "Ø´Ø±ÙŠØ­Ø© 25%" },
    { limit: 400000, rate: 0.275, label: "Ø´Ø±ÙŠØ­Ø© 27.5%" }
];

function updateUI() {
    const isInsured = document.querySelector('input[name="insured"]:checked').value === 'yes';
    document.getElementById('insContainer').style.display = isInsured ? "flex" : "none";
    calculate();
}

function calculate() {
    const insured = document.querySelector('input[name="insured"]:checked').value === 'yes';
    
    let salaryMonthly = parseFloat(document.getElementById('salary').value) || 0;
    let insuranceMonthly = insured ? (parseFloat(document.getElementById('insurance').value) || 0) : 0;

    // 1. Ø§Ù„ÙˆØ¹Ø§Ø¡ Ø§Ù„Ø´Ù‡Ø±ÙŠ (Ø¨Ø¹Ø¯ Ø®ØµÙ… Ø§Ù„ØªØ£Ù…ÙŠÙ†Ø§Øª ÙˆØ§Ù„Ø¥Ø¹ÙØ§Ø¡ Ø§Ù„Ø´Ø®ØµÙŠ)
    const taxableMonthly = Math.max(0, salaryMonthly - insuranceMonthly - EXEMPTION_MONTHLY);
    const taxableAnnual = taxableMonthly * 12;

    // 2. Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ø³Ù†ÙˆÙŠØ© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø±Ø§Ø¦Ø­
    let totalTax = 0;
    let temp = taxableAnnual;
    let bracketDetails = [];

    brackets.forEach(b => {
        let amountInBracket = Math.min(temp, b.limit);
        let tax = amountInBracket * b.rate;
        bracketDetails.push({ amount: amountInBracket, tax: tax, rate: b.rate, label: b.label, limit: b.limit });
        totalTax += tax;
        temp = Math.max(0, temp - b.limit);
    });

    // 3. ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¹Ø§Ù„ÙŠØ© (Ø­Ø³Ø¨ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ† Ù„Ù…Ù† ÙŠØªØ®Ø·Ù‰ 600 Ø£Ù„Ù)
    if (taxableAnnual > 600000) {
        if (taxableAnnual <= 700000) totalTax += 4000;
        else if (taxableAnnual <= 800000) totalTax += 6750;
        else if (taxableAnnual <= 900000) totalTax += 10250;
        else if (taxableAnnual <= 1200000) totalTax += 15250;
    }

    // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ÙÙŠ Ø§Ù„Ø®Ø§Ù†Ø§Øª Ø§Ù„Ù…Ù„Ø®ØµØ©
    document.getElementById('resMonthlyTaxable').innerText = taxableMonthly.toLocaleString(undefined, {maximumFractionDigits: 0}) + ' Ø¬.Ù…';
    document.getElementById('resAnnualTaxable').innerText = taxableAnnual.toLocaleString(undefined, {maximumFractionDigits: 0}) + ' Ø¬.Ù…';
    document.getElementById('resMonthlyTax').innerText = (totalTax / 12).toLocaleString(undefined, {minimumFractionDigits: 2}) + ' Ø¬.Ù…';
    document.getElementById('resAnnualTax').innerText = totalTax.toLocaleString(undefined, {maximumFractionDigits: 0}) + ' Ø¬.Ù…';

    renderVisuals(taxableAnnual, bracketDetails);
    renderExplainSteps(salaryMonthly, insuranceMonthly, taxableMonthly, taxableAnnual, bracketDetails, totalTax);
}

function renderVisuals(taxableAnnual, details) {
    // Ø±Ø³Ù… Ø§Ù„Ø£ÙƒÙˆØ§Ø¨
    const cupsContainer = document.getElementById('cups');
    cupsContainer.innerHTML = '';
    details.forEach(d => {
        const fillPercent = (d.amount / d.limit) * 100;
        const cup = document.createElement('div');
        cup.className = 'cup-wrapper';
        
        const formattedAmount = d.amount.toLocaleString(undefined, {maximumFractionDigits: 0});
        
        cup.innerHTML = `
            <div class="cup"><div class="fill" style="height: ${fillPercent}%"></div></div>
            <div class="cup-label">
                <strong>${(d.rate*100).toFixed(0)}%</strong><br>
                <span>${formattedAmount}</span>
            </div>
        `;
        cupsContainer.appendChild(cup);
    });

    // Ø±Ø³Ù… Ø§Ù„Ø³Ù„Ø§Ù„Ù… Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ©
    const stairsContainer = document.getElementById('stairs');
    stairsContainer.innerHTML = '';
    details.forEach(d => {
        const step = document.createElement('div');
        step.className = `step ${d.amount > 0 ? 'active' : ''}`;
        step.innerHTML = `
            <div class="step-title">${d.label}</div>
            <div>Ø§Ù„Ù…Ø¨Ù„Øº: ${d.amount.toLocaleString(undefined, {maximumFractionDigits: 0})}</div>
            <div class="step-tax">Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©: ${d.tax.toLocaleString(undefined, {minimumFractionDigits: 2})}</div>
            <div class="step-rate">${(d.rate*100).toFixed(1)}%</div>
        `;
        stairsContainer.appendChild(step);
    });
}

// Helper formatting function for money
function money(n, digits = 0){
  return (n || 0).toLocaleString(undefined, {minimumFractionDigits: digits, maximumFractionDigits: digits}) + " Ø¬.Ù…";
}

function renderExplainSteps(salaryMonthly, insuranceMonthly, taxableMonthly, taxableAnnual, details, totalTax){
  const box = document.getElementById("explainSteps");
  if(!box) return;

  const monthlyTax = totalTax / 12;

  // Filter out used brackets for the explanation (keeping the exempt one for context)
  const used = details.filter(d => d.amount > 0 || d.rate === 0);

  const bracketsLines = used.map((d) => {
    const pct = (d.rate * 100).toFixed(1).replace(".0","");
    return `
      <li>
        <span class="badge">${d.label}</span>
        (Ø­Ø¯Ù‡Ø§: <span class="mono">${money(d.limit)}</span>)
        Ø¯Ø®Ù„ ÙÙŠÙ‡Ø§: <span class="mono">${money(d.amount)}</span>
        Ã— <span class="mono">${pct}%</span>
        = <span class="mono">${money(d.tax, 2)}</span>
      </li>
    `;
  }).join("");

  box.innerHTML = `
    <div class="explain-box">
      <ol>
        <li>
          <strong>Ø¨Ù†Ø¨Ø¯Ø£ Ø¨Ø§Ù„Ù…Ø±ØªØ¨ Ø§Ù„Ø´Ù‡Ø±ÙŠ:</strong>
          <span class="mono">${money(salaryMonthly)}</span>
        </li>

        <li>
          <strong>Ù†Ø®ØµÙ… ØªØ£Ù…ÙŠÙ†Ø§Øª Ø§Ù„Ù…ÙˆØ¸Ù (Ù„Ùˆ Ù…ÙˆØ¬ÙˆØ¯Ø©):</strong>
          <span class="mono">${money(insuranceMonthly)}</span>
          <div class="small-note">âš ï¸ Ø¨Ù†Ø®ØµÙ… <b>Ø­ØµØ© Ø§Ù„Ù…ÙˆØ¸Ù</b> ÙÙ‚Ø· Ù„Ø£Ù†Ù‡Ø§ Ø¨ØªÙ‚Ù„Ù‘Ù„ Ø§Ù„ÙˆØ¹Ø§Ø¡ Ø§Ù„Ø¶Ø±ÙŠØ¨ÙŠ.</div>
        </li>

        <li>
          <strong>Ù†Ø®ØµÙ… Ø§Ù„Ø¥Ø¹ÙØ§Ø¡ Ø§Ù„Ø´Ø®ØµÙŠ Ø§Ù„Ø´Ù‡Ø±ÙŠ:</strong>
          <span class="mono">${money(EXEMPTION_MONTHLY, 2)}</span>
          <div class="small-note">Ø§Ù„Ø¥Ø¹ÙØ§Ø¡ Ø§Ù„Ø³Ù†ÙˆÙŠ = <b>${money(PERSONAL_EXEMPTION_ANNUAL)}</b> (Ù…ØªÙ‚Ø³Ù… Ø¹Ù„Ù‰ 12).</div>
        </li>

        <li>
          <strong>ÙŠØ¨Ù‚Ù‰ Ø§Ù„ÙˆØ¹Ø§Ø¡ Ø§Ù„Ø´Ù‡Ø±ÙŠ (Ø§Ù„Ø®Ø§Ø¶Ø¹ Ù„Ù„Ø¶Ø±ÙŠØ¨Ø©):</strong>
          <span class="mono">${money(taxableMonthly, 2)}</span>
          ${taxableMonthly < 0.01 ? `<div class="small-note">âœ… Ø§Ù„ÙˆØ¹Ø§Ø¡ Ø·Ù„Ø¹ ØµÙØ±/Ø³Ø§Ù„Ø¨ â†’ Ù…ÙÙŠØ´ Ø¶Ø±ÙŠØ¨Ø©.</div>` : ``}
        </li>

        <li>
          <strong>Ù†Ø­ÙˆÙ‘Ù„Ù‡ Ø³Ù†ÙˆÙŠ:</strong>
          Ø§Ù„ÙˆØ¹Ø§Ø¡ Ø§Ù„Ø³Ù†ÙˆÙŠ = Ø§Ù„ÙˆØ¹Ø§Ø¡ Ø§Ù„Ø´Ù‡Ø±ÙŠ Ã— 12
          = <span class="mono">${money(taxableAnnual)}</span>
        </li>

        <li>
          <strong>Ù†ÙˆØ²Ù‘Ø¹ Ø§Ù„ÙˆØ¹Ø§Ø¡ Ø§Ù„Ø³Ù†ÙˆÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø±Ø§Ø¦Ø­:</strong>
          <ul style="margin-top:10px; padding-right: 18px;">
            ${bracketsLines || `<li>Ù…ÙÙŠØ´ Ø´Ø±Ø§Ø¦Ø­ Ù„Ø£Ù† Ø§Ù„ÙˆØ¹Ø§Ø¡ = 0</li>`}
          </ul>
        </li>

        <li>
          <strong>Ù†Ø¬Ù…Ø¹ Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ø´Ø±Ø§Ø¦Ø­ = Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ø³Ù†ÙˆÙŠØ©:</strong>
          <span class="mono">${money(totalTax)}</span>
        </li>

        <li>
          <strong>Ù†Ø·Ù„Ø¹ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ø´Ù‡Ø±ÙŠØ©:</strong>
          Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ø´Ù‡Ø±ÙŠØ© = Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ø³Ù†ÙˆÙŠØ© Ã· 12
          = <span class="mono">${money(monthlyTax, 2)}</span>
        </li>
      </ol>

    </div>
  `;
}

// Initial calculation on load
calculate();
</script>

</body>
</html>
